<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kid</title>
    <style>
        body {
            background-image: url("img/kid.svg");
            background-size: cover;
            background-repeat: no-repeat;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        img {
            max-width: 100%;
            height: auto;
            position: relative;
            transition: left 0.2s ease;
        }

        #me {
            position: absolute;
            bottom: 10px;
        }

        .rock {
            position: absolute;
            top: -50px;
            width: 50px;
            height: 50px;
        }

        #timer {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 18px;
        }

        .home{
            float: none;
            position: fixed;
            left: 2%;
            top: 2%;
            margin: 0;
        }
        .next {
            float: none;
            position: fixed;
            right: 2%;
            bottom: 2%;
            margin: 0;
        }

        a img:hover {
            transform: scale(1.25);
        }
    </style>
</head>
<body>
<div class="home"><a href="index.html"><img src="img/home.png"></a></div>

<div id="timer">Time: 0s</div>
<img id="me" src="img/withbrother.png" alt="Image of kid with brother">
<div class="next"><a href="kid.html"><img src="img/next.png"></a></div>
<script>
    const timerElement = document.getElementById("timer");
    let time = 0;

    setInterval(() => {
        time += 1;
        timerElement.textContent = `Time: ${time}s`;
    }, 1000);

    const img = document.getElementById("me");
    let currentLocation = 0;

    document.addEventListener("keydown", (event) => {
        if (event.key === "ArrowRight") {
            currentLocation = Math.min(currentLocation + 20, window.innerWidth - img.offsetWidth);
        } else if (event.key === "ArrowLeft") {
            currentLocation = Math.max(currentLocation - 20, 0);
        }
        img.style.left = `${currentLocation}px`;
    });

    function spawnRock() {
        const rock = document.createElement("img");
        rock.src = "img/rock.png";
        rock.classList.add("rock");
        rock.style.left = `${Math.random() * (window.innerWidth - 50)}px`;
        document.body.appendChild(rock);

        let rockTop = -50;
        const rockInterval = setInterval(() => {
            rockTop += 5;
            rock.style.top = `${rockTop}px`;

            const rockRect = rock.getBoundingClientRect();
            const imgRect = img.getBoundingClientRect();

            // Check for collision
            if (
                rockRect.top < imgRect.bottom &&
                rockRect.bottom > imgRect.top &&
                rockRect.left < imgRect.right &&
                rockRect.right > imgRect.left
            ) {
                clearInterval(rockInterval);
                alert(`Game Over! Timer: ${time}s`);
                location.reload();
            }

            // Remove rock if it goes out of bounds
            if (rockTop > window.innerHeight) {
                clearInterval(rockInterval);
                rock.remove();
            }
        }, 50);
    }

    // Spawn rocks every 2 seconds
    setInterval(spawnRock, 2000);
</script>
</body>
</html>
